<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
        <link id="home_css" rel="stylesheet" href="/docs/flyte/css/home.css?v=@@BUILD@@" />
        <script>
            // Set up error handler immediately
            document.addEventListener('DOMContentLoaded', function() {
                const logo = document.getElementById('logo');
                logo.onerror = function() {
                    // If main logo fails, try fallback path
                    console.log('Primary logo failed to load, trying fallback');
                    this.src = 'static/images/icon-logo.svg';

                    // Add second error handler for fallback
                    this.onerror = function() {
                        console.error('Failed to load logo image from both paths');
                        logo.style.display = 'none';
                    };
                };

                const missingPageRefs = document.querySelectorAll('.missing-page-ref');
                for (missingPageRef of missingPageRefs) {
                    missingPageRef.innerHTML = "<code>" + window.location.toString() + "</code>";
                }

                const legacyLink = new URL(window.location);
                legacyLink.hostname = 'docs-legacy.flyte.org';
                legacyLink.pathname = legacyLink.pathname.replace('/docs/flyte/', '/en/latest/');
                if (legacyLink.pathname.endsWith('/')) {
                    legacyLink.pathname = legacyLink.pathname.slice(0, -1) + '.html';
                }

                const legacyLink2 = new URL(window.location);
                legacyLink2.hostname = 'docs-legacy.flyte.org';
                legacyLink2.pathname = legacyLink2.pathname.replace('/docs/flyte/', '/en/latest/');
                if (legacyLink2.pathname.endsWith('/')) {
                    legacyLink2.pathname = legacyLink2.pathname + 'index.html';
                }

                const legacyLinkElement = document.getElementById('legacy_link');
                if (legacyLinkElement) {
                    legacyLinkElement.href = legacyLink.toString();
                    // legacyLinkElement.innerHTML = legacyLink.toString();
                }

                const legacyLinkElement2 = document.getElementById('legacy_link_2');
                if (legacyLinkElement2) {
                    legacyLinkElement2.href = legacyLink2.toString();
                }
            });
        </script>
        <script>
            var upperVariant = "@@VARIANT@@".toUpperCase();

            document.addEventListener('DOMContentLoaded', function() {
                const notFoundPanel = document.querySelector('.container.not-found');
                const variantMismatchPanel = document.querySelector('.container.variant-mismatch');

                const url = new URL(window.location);
                
                // Extract query string parameters
                const source = url.searchParams.get('source');
                const variant = url.searchParams.get('variant');
                const origin = url.searchParams.get('origin');

                if (variant !== null) {
                    notFoundPanel.style.display = 'none';
                    variantMismatchPanel.style.display = 'block';

                    const title = document.getElementById('title');
                    title.innerHTML = source;

                    const variantTitle = document.getElementById('variant-title');
                    variantTitle.innerHTML = "in " + upperVariant;

                    const fromToPlaceholder = document.getElementById('from-to-placeholder');
                    fromToPlaceholder.innerHTML = "to " + upperVariant.toUpperCase() + ", ";

                    const goBackText = document.getElementById('go-back-text');
                    goBackText.innerHTML = "to " + source;

                    const goBackVariant = document.getElementById('go-back-variant');
                    goBackVariant.innerHTML = "in " + variant.toUpperCase();

                    const returnVariant = document.getElementById('return-variant');
                    returnVariant.innerHTML = "in " + variant.toUpperCase();

                    const goBackLink = document.getElementById('go-back-link');
                    goBackLink.href = origin;
                }
            });
        </script>
    </head>
    <body class="variant-flyte">
        <div class="container not-found">
            <h1>
                <img id="logo" src="/docs/flyte/images/icon-logo-flyte.png" class="logo" />
                404 - Page Not Found
            </h1>

            <p>We are sorry, but the page you are looking for does not exist.</p>

            <div class="nav">
                <p>
                    Please click for the closest documentation entry point:
                </p>
                <p class="target-link-text">
                    <a href="@@BASE@@/@@VARIANT@@/">@@VARIANT@@</a>
                </p>
            </div>

            <div class="warn">
                <div class="title">
                    <span>Migration To New Documentation Site Undergoing</span>
                </div>
                <div class="content">
                    <p>
                        This document is in the process of being migrated to a new
                        platform. In the meantime, you can find the old
                        documentation at the following link:
                    </p>
                    <p>
                        <a id="legacy_link" href="https://docs-legacy.flyte.org/en/latest/">
                            Old Documentation Site
                        </a>
                    </p>
                    <p>
                        In case the link above does not work, you can try
                        <a id="legacy_link_2" href="https://docs-legacy.flyte.org/en/latest/">this</a>
                        other location.
                    </p>
                </div>
            </div>

            <footer>
                <p>
                    If you believe you have reached this page in error, please
                    report it to us:
                </p>
                <p class="missing-page-ref" />
            </footer>
        </div>
        <div class="container variant-mismatch">
            <h1>
                <img id="logo" src="/docs/flyte/images/icon-logo-flyte.png" class="logo" />
                <span id="title"></span>
            </h1>
            <h2>
                Content Not Available <span id="variant-title"></span>
            </h2>

            <p>
                You changed the product <span id="from-to-placeholder"></span> but the similar content is not available in the newly selected product.
            </p>

            <div class="nav">
                <p>
                    Please select from the following options the best way to proceed:
                </p>

                <div class="option">
                    <p>Return to the original page <span id="return-variant"></span>...</p>
                    <p class="target-link-text">
                        <a id="go-back-link" href="@@BASE@@/@@VARIANT@@/">
                            Go back <span id="go-back-text"></span>
                            <span id="go-back-variant"></span>
                        </a>
                    </p>
                </div>

                <div class="or">
                    <table>
                        <tbody>
                            <tr>
                                <td><hr/></td>
                                <td>OR</td>
                                <td><hr/></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="option">
                    <p>Go to the new product content...</p>
                    <p class="target-link-text">
                        <a id="user-guide" href="@@BASE@@/@@VARIANT@@/">Go to @@VARIANT@@ User Guide</a>
                    </p>
                </div>

            </div>

            <p>
                If you believe you have reached this page in error, please
                report it to us:
            </p>
            <p class="missing-page-ref" />
        </div>
    </body>
</html>

